!function(){function a(a,b){for(var c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1}function b(a){return a.replace(/^\s+|\s+$/g,"")}function c(a){return a.replace(/^\s+/g,"")}function d(a,b){"use strict";var c=new e(a,b);return c.beautify()}function e(d,e){"use strict";function f(a,b){var c=0;a&&(c=a.indentation_level,!R.just_added_newline()&&a.line_indent_level>c&&(c=a.line_indent_level));var d={mode:b,parent:a,last_text:a?a.last_text:"",last_word:a?a.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:c,line_indent_level:a?a.line_indent_level:c,start_line_index:R.get_line_number(),ternary_depth:0};return d}function k(a){var b=a.newlines,c=ba.keep_array_indentation&&t(Y.mode);if(c)for(d=0;b>d;d+=1)n(d>0);else if(ba.max_preserve_newlines&&b>ba.max_preserve_newlines&&(b=ba.max_preserve_newlines),ba.preserve_newlines&&a.newlines>1){n();for(var d=1;b>d;d+=1)n(!0)}U=a,aa[U.type]()}function l(a){a=a.replace(/\x0d/g,"");for(var b=[],c=a.indexOf("\n");-1!==c;)b.push(a.substring(0,c)),a=a.substring(c+1),c=a.indexOf("\n");return a.length&&b.push(a),b}function m(a){if(a=void 0===a?!1:a,!R.just_added_newline())if(ba.preserve_newlines&&U.wanted_newline||a)n(!1,!0);else if(ba.wrap_line_length){var b=R.current_line.get_character_count()+U.text.length+(R.space_before_token?1:0);b>=ba.wrap_line_length&&n(!1,!0)}}function n(a,b){if(!b&&";"!==Y.last_text&&","!==Y.last_text&&"="!==Y.last_text&&"TK_OPERATOR"!==V)for(;Y.mode===j.Statement&&!Y.if_block&&!Y.do_block;)v();R.add_new_line(a)&&(Y.multiline_frame=!0)}function o(){R.just_added_newline()&&(ba.keep_array_indentation&&t(Y.mode)&&U.wanted_newline?(R.current_line.push(U.whitespace_before),R.space_before_token=!1):R.set_indent(Y.indentation_level)&&(Y.line_indent_level=Y.indentation_level))}function p(a){return R.raw?void R.add_raw_token(U):(ba.comma_first&&"TK_COMMA"===V&&R.just_added_newline()&&","===R.previous_line.last()&&(R.previous_line.pop(),o(),R.add_token(","),R.space_before_token=!0),a=a||U.text,o(),void R.add_token(a))}function q(){Y.indentation_level+=1}function r(){Y.indentation_level>0&&(!Y.parent||Y.indentation_level>Y.parent.indentation_level)&&(Y.indentation_level-=1)}function s(a){Y?($.push(Y),Z=Y):Z=f(null,a),Y=f(Z,a)}function t(a){return a===j.ArrayLiteral}function u(b){return a(b,[j.Expression,j.ForInitializer,j.Conditional])}function v(){$.length>0&&(Z=Y,Y=$.pop(),Z.mode===j.Statement&&R.remove_redundant_indentation(Z))}function w(){return Y.parent.mode===j.ObjectLiteral&&Y.mode===j.Statement&&(":"===Y.last_text&&0===Y.ternary_depth||"TK_RESERVED"===V&&a(Y.last_text,["get","set"]))}function x(){return"TK_RESERVED"===V&&a(Y.last_text,["var","let","const"])&&"TK_WORD"===U.type||"TK_RESERVED"===V&&"do"===Y.last_text||"TK_RESERVED"===V&&"return"===Y.last_text&&!U.wanted_newline||"TK_RESERVED"===V&&"else"===Y.last_text&&("TK_RESERVED"!==U.type||"if"!==U.text)||"TK_END_EXPR"===V&&(Z.mode===j.ForInitializer||Z.mode===j.Conditional)||"TK_WORD"===V&&Y.mode===j.BlockStatement&&!Y.in_case&&"--"!==U.text&&"++"!==U.text&&"function"!==W&&"TK_WORD"!==U.type&&"TK_RESERVED"!==U.type||Y.mode===j.ObjectLiteral&&(":"===Y.last_text&&0===Y.ternary_depth||"TK_RESERVED"===V&&a(Y.last_text,["get","set"]))?(s(j.Statement),q(),"TK_RESERVED"===V&&a(Y.last_text,["var","let","const"])&&"TK_WORD"===U.type&&(Y.declaration_statement=!0),w()||m("TK_RESERVED"===U.type&&a(U.text,["do","for","if","while"])),!0):!1}function y(a,c){for(var d=0;d<a.length;d++){var e=b(a[d]);if(e.charAt(0)!==c)return!1}return!0}function z(a,b){for(var c,d=0,e=a.length;e>d;d++)if(c=a[d],c&&0!==c.indexOf(b))return!1;return!0}function A(b){return a(b,["case","return","do","if","throw","else"])}function B(a){var b=S+(a||0);return 0>b||b>=ca.length?null:ca[b]}function C(){x();var b=j.Expression;if("["===U.text){if("TK_WORD"===V||")"===Y.last_text)return"TK_RESERVED"===V&&a(Y.last_text,T.line_starters)&&(R.space_before_token=!0),s(b),p(),q(),void(ba.space_in_paren&&(R.space_before_token=!0));b=j.ArrayLiteral,t(Y.mode)&&("["===Y.last_text||","===Y.last_text&&("]"===W||"}"===W))&&(ba.keep_array_indentation||n())}else"TK_RESERVED"===V&&"for"===Y.last_text?b=j.ForInitializer:"TK_RESERVED"===V&&a(Y.last_text,["if","while"])&&(b=j.Conditional);";"===Y.last_text||"TK_START_BLOCK"===V?n():"TK_END_EXPR"===V||"TK_START_EXPR"===V||"TK_END_BLOCK"===V||"."===Y.last_text?m(U.wanted_newline):"TK_RESERVED"===V&&"("===U.text||"TK_WORD"===V||"TK_OPERATOR"===V?"TK_RESERVED"===V&&("function"===Y.last_word||"typeof"===Y.last_word)||"*"===Y.last_text&&"function"===W?ba.space_after_anon_function&&(R.space_before_token=!0):"TK_RESERVED"!==V||!a(Y.last_text,T.line_starters)&&"catch"!==Y.last_text||ba.space_before_conditional&&(R.space_before_token=!0):R.space_before_token=!0,"("===U.text&&"TK_RESERVED"===V&&"await"===Y.last_word&&(R.space_before_token=!0),"("===U.text&&("TK_EQUALS"===V||"TK_OPERATOR"===V)&&(w()||m()),s(b),p(),ba.space_in_paren&&(R.space_before_token=!0),q()}function D(){for(;Y.mode===j.Statement;)v();Y.multiline_frame&&m("]"===U.text&&t(Y.mode)&&!ba.keep_array_indentation),ba.space_in_paren&&("TK_START_EXPR"!==V||ba.space_in_empty_paren?R.space_before_token=!0:(R.trim(),R.space_before_token=!1)),"]"===U.text&&ba.keep_array_indentation?(p(),v()):(v(),p()),R.remove_redundant_indentation(Z),Y.do_while&&Z.mode===j.Conditional&&(Z.mode=j.Expression,Y.do_block=!1,Y.do_while=!1)}function E(){var b=B(1),c=B(2);s(c&&(":"===c.text&&a(b.type,["TK_STRING","TK_WORD","TK_RESERVED"])||a(b.text,["get","set"])&&a(c.type,["TK_WORD","TK_RESERVED"]))?a(W,["class","interface"])?j.BlockStatement:j.ObjectLiteral:j.BlockStatement);var d=!b.comments_before.length&&"}"===b.text,e=d&&"function"===Y.last_word&&"TK_END_EXPR"===V;"expand"===ba.brace_style||"none"===ba.brace_style&&U.wanted_newline?"TK_OPERATOR"!==V&&(e||"TK_EQUALS"===V||"TK_RESERVED"===V&&A(Y.last_text)&&"else"!==Y.last_text)?R.space_before_token=!0:n(!1,!0):"TK_OPERATOR"!==V&&"TK_START_EXPR"!==V?"TK_START_BLOCK"===V?n():R.space_before_token=!0:t(Z.mode)&&","===Y.last_text&&("}"===W?R.space_before_token=!0:n()),p(),q()}function F(){for(;Y.mode===j.Statement;)v();var a="TK_START_BLOCK"===V;"expand"===ba.brace_style?a||n():a||(t(Y.mode)&&ba.keep_array_indentation?(ba.keep_array_indentation=!1,n(),ba.keep_array_indentation=!0):n()),v(),p()}function G(){if("TK_RESERVED"===U.type&&Y.mode!==j.ObjectLiteral&&a(U.text,["set","get"])&&(U.type="TK_WORD"),"TK_RESERVED"===U.type&&Y.mode===j.ObjectLiteral){var b=B(1);":"==b.text&&(U.type="TK_WORD")}if(x()||!U.wanted_newline||u(Y.mode)||"TK_OPERATOR"===V&&"--"!==Y.last_text&&"++"!==Y.last_text||"TK_EQUALS"===V||!ba.preserve_newlines&&"TK_RESERVED"===V&&a(Y.last_text,["var","let","const","set","get"])||n(),Y.do_block&&!Y.do_while){if("TK_RESERVED"===U.type&&"while"===U.text)return R.space_before_token=!0,p(),R.space_before_token=!0,void(Y.do_while=!0);n(),Y.do_block=!1}if(Y.if_block)if(Y.else_block||"TK_RESERVED"!==U.type||"else"!==U.text){for(;Y.mode===j.Statement;)v();Y.if_block=!1,Y.else_block=!1}else Y.else_block=!0;if("TK_RESERVED"===U.type&&("case"===U.text||"default"===U.text&&Y.in_case_statement))return n(),(Y.case_body||ba.jslint_happy)&&(r(),Y.case_body=!1),p(),Y.in_case=!0,void(Y.in_case_statement=!0);if("TK_RESERVED"===U.type&&"function"===U.text&&((a(Y.last_text,["}",";"])||R.just_added_newline()&&!a(Y.last_text,["[","{",":","=",","]))&&(R.just_added_blankline()||U.comments_before.length||(n(),n(!0))),"TK_RESERVED"===V||"TK_WORD"===V?"TK_RESERVED"===V&&a(Y.last_text,["get","set","new","return","export","async"])?R.space_before_token=!0:"TK_RESERVED"===V&&"default"===Y.last_text&&"export"===W?R.space_before_token=!0:n():"TK_OPERATOR"===V||"="===Y.last_text?R.space_before_token=!0:(Y.multiline_frame||!u(Y.mode)&&!t(Y.mode))&&n()),("TK_COMMA"===V||"TK_START_EXPR"===V||"TK_EQUALS"===V||"TK_OPERATOR"===V)&&(w()||m()),"TK_RESERVED"===U.type&&a(U.text,["function","get","set"]))return p(),void(Y.last_word=U.text);if(_="NONE","TK_END_BLOCK"===V?"TK_RESERVED"===U.type&&a(U.text,["else","catch","finally"])?"expand"===ba.brace_style||"end-expand"===ba.brace_style||"none"===ba.brace_style&&U.wanted_newline?_="NEWLINE":(_="SPACE",R.space_before_token=!0):_="NEWLINE":"TK_SEMICOLON"===V&&Y.mode===j.BlockStatement?_="NEWLINE":"TK_SEMICOLON"===V&&u(Y.mode)?_="SPACE":"TK_STRING"===V?_="NEWLINE":"TK_RESERVED"===V||"TK_WORD"===V||"*"===Y.last_text&&"function"===W?_="SPACE":"TK_START_BLOCK"===V?_="NEWLINE":"TK_END_EXPR"===V&&(R.space_before_token=!0,_="NEWLINE"),"TK_RESERVED"===U.type&&a(U.text,T.line_starters)&&")"!==Y.last_text&&(_="else"===Y.last_text||"export"===Y.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===U.type&&a(U.text,["else","catch","finally"]))if("TK_END_BLOCK"!==V||"expand"===ba.brace_style||"end-expand"===ba.brace_style||"none"===ba.brace_style&&U.wanted_newline)n();else{R.trim(!0);var c=R.current_line;"}"!==c.last()&&n(),R.space_before_token=!0}else"NEWLINE"===_?"TK_RESERVED"===V&&A(Y.last_text)?R.space_before_token=!0:"TK_END_EXPR"!==V?"TK_START_EXPR"===V&&"TK_RESERVED"===U.type&&a(U.text,["var","let","const"])||":"===Y.last_text||("TK_RESERVED"===U.type&&"if"===U.text&&"else"===Y.last_text?R.space_before_token=!0:n()):"TK_RESERVED"===U.type&&a(U.text,T.line_starters)&&")"!==Y.last_text&&n():Y.multiline_frame&&t(Y.mode)&&","===Y.last_text&&"}"===W?n():"SPACE"===_&&(R.space_before_token=!0);p(),Y.last_word=U.text,"TK_RESERVED"===U.type&&"do"===U.text&&(Y.do_block=!0),"TK_RESERVED"===U.type&&"if"===U.text&&(Y.if_block=!0)}function H(){for(x()&&(R.space_before_token=!1);Y.mode===j.Statement&&!Y.if_block&&!Y.do_block;)v();p()}function I(){x()?R.space_before_token=!0:"TK_RESERVED"===V||"TK_WORD"===V?R.space_before_token=!0:"TK_COMMA"===V||"TK_START_EXPR"===V||"TK_EQUALS"===V||"TK_OPERATOR"===V?w()||m():n(),p()}function J(){x(),Y.declaration_statement&&(Y.declaration_assignment=!0),R.space_before_token=!0,p(),R.space_before_token=!0}function K(){return Y.declaration_statement?(u(Y.parent.mode)&&(Y.declaration_assignment=!1),p(),void(Y.declaration_assignment?(Y.declaration_assignment=!1,n(!1,!0)):(R.space_before_token=!0,ba.comma_first&&m()))):(p(),void(Y.mode===j.ObjectLiteral||Y.mode===j.Statement&&Y.parent.mode===j.ObjectLiteral?(Y.mode===j.Statement&&v(),n()):(R.space_before_token=!0,ba.comma_first&&m())))}function L(){if(x(),"TK_RESERVED"===V&&A(Y.last_text))return R.space_before_token=!0,void p();if("*"===U.text&&"TK_DOT"===V)return void p();if(":"===U.text&&Y.in_case)return Y.case_body=!0,q(),p(),n(),void(Y.in_case=!1);if("::"===U.text)return void p();"TK_OPERATOR"===V&&m();var b=!0,c=!0;a(U.text,["--","++","!","~"])||a(U.text,["-","+"])&&(a(V,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||a(Y.last_text,T.line_starters)||","===Y.last_text)?(b=!1,c=!1,!U.wanted_newline||"--"!==U.text&&"++"!==U.text||n(!1,!0),";"===Y.last_text&&u(Y.mode)&&(b=!0),"TK_RESERVED"===V?b=!0:"TK_END_EXPR"===V?b=!("]"===Y.last_text&&("--"===U.text||"++"===U.text)):"TK_OPERATOR"===V&&(b=a(U.text,["--","-","++","+"])&&a(Y.last_text,["--","-","++","+"]),a(U.text,["+","-"])&&a(Y.last_text,["--","++"])&&(c=!0)),Y.mode!==j.BlockStatement&&Y.mode!==j.Statement||"{"!==Y.last_text&&";"!==Y.last_text||n()):":"===U.text?0===Y.ternary_depth?b=!1:Y.ternary_depth-=1:"?"===U.text?Y.ternary_depth+=1:"*"===U.text&&"TK_RESERVED"===V&&"function"===Y.last_text&&(b=!1,c=!1),R.space_before_token=R.space_before_token||b,p(),R.space_before_token=c}function M(){if(R.raw)return R.add_raw_token(U),void(U.directives&&"end"===U.directives.preserve&&(ba.test_output_raw||(R.raw=!1)));if(U.directives)return n(!1,!0),p(),"start"===U.directives.preserve&&(R.raw=!0),void n(!1,!0);if(!i.newline.test(U.text)&&!U.wanted_newline)return R.space_before_token=!0,p(),void(R.space_before_token=!0);var a,b=l(U.text),d=!1,e=!1,f=U.whitespace_before,g=f.length;for(n(!1,!0),b.length>1&&(y(b.slice(1),"*")?d=!0:z(b.slice(1),f)&&(e=!0)),p(b[0]),a=1;a<b.length;a++)n(!1,!0),d?p(" "+c(b[a])):e&&b[a].length>g?p(b[a].substring(g)):R.add_token(b[a]);n(!1,!0)}function N(){U.wanted_newline?n(!1,!0):R.trim(!0),R.space_before_token=!0,p(),n(!1,!0)}function O(){x(),"TK_RESERVED"===V&&A(Y.last_text)?R.space_before_token=!0:m(")"===Y.last_text&&ba.break_chained_methods),p()}function P(){p(),"\n"===U.text[U.text.length-1]&&n()}function Q(){for(;Y.mode===j.Statement;)v()}var R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca=[],da="";for(aa={TK_START_EXPR:C,TK_END_EXPR:D,TK_START_BLOCK:E,TK_END_BLOCK:F,TK_WORD:G,TK_RESERVED:G,TK_SEMICOLON:H,TK_STRING:I,TK_EQUALS:J,TK_OPERATOR:L,TK_COMMA:K,TK_BLOCK_COMMENT:M,TK_COMMENT:N,TK_DOT:O,TK_UNKNOWN:P,TK_EOF:Q},e=e?e:{},ba={},void 0!==e.braces_on_own_line&&(ba.brace_style=e.braces_on_own_line?"expand":"collapse"),ba.brace_style=e.brace_style?e.brace_style:ba.brace_style?ba.brace_style:"collapse","expand-strict"===ba.brace_style&&(ba.brace_style="expand"),ba.indent_size=e.indent_size?parseInt(e.indent_size,10):4,ba.indent_char=e.indent_char?e.indent_char:" ",ba.eol=e.eol?e.eol:"\n",ba.preserve_newlines=void 0===e.preserve_newlines?!0:e.preserve_newlines,ba.break_chained_methods=void 0===e.break_chained_methods?!1:e.break_chained_methods,ba.max_preserve_newlines=void 0===e.max_preserve_newlines?0:parseInt(e.max_preserve_newlines,10),ba.space_in_paren=void 0===e.space_in_paren?!1:e.space_in_paren,ba.space_in_empty_paren=void 0===e.space_in_empty_paren?!1:e.space_in_empty_paren,ba.jslint_happy=void 0===e.jslint_happy?!1:e.jslint_happy,ba.space_after_anon_function=void 0===e.space_after_anon_function?!1:e.space_after_anon_function,ba.keep_array_indentation=void 0===e.keep_array_indentation?!1:e.keep_array_indentation,ba.space_before_conditional=void 0===e.space_before_conditional?!0:e.space_before_conditional,ba.unescape_strings=void 0===e.unescape_strings?!1:e.unescape_strings,ba.wrap_line_length=void 0===e.wrap_line_length?0:parseInt(e.wrap_line_length,10),ba.e4x=void 0===e.e4x?!1:e.e4x,ba.end_with_newline=void 0===e.end_with_newline?!1:e.end_with_newline,ba.comma_first=void 0===e.comma_first?!1:e.comma_first,ba.test_output_raw=void 0===e.test_output_raw?!1:e.test_output_raw,ba.jslint_happy&&(ba.space_after_anon_function=!0),e.indent_with_tabs&&(ba.indent_char="	",ba.indent_size=1),ba.eol=ba.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),X="";ba.indent_size>0;)X+=ba.indent_char,ba.indent_size-=1;var ea=0;if(d&&d.length){for(;" "===d.charAt(ea)||"	"===d.charAt(ea);)da+=d.charAt(ea),ea+=1;d=d.substring(ea)}V="TK_START_BLOCK",W="",R=new g(X,da),R.raw=ba.test_output_raw,$=[],s(j.BlockStatement),this.beautify=function(){var a,b;for(T=new h(d,ba,X),ca=T.tokenize(),S=0;a=B();){for(var c=0;c<a.comments_before.length;c++)k(a.comments_before[c]);k(a),W=Y.last_text,V=a.type,Y.last_text=a.text,S+=1}return b=R.get_code(),ba.end_with_newline&&(b+="\n"),"\n"!=ba.eol&&(b=b.replace(/[\n]/g,ba.eol)),b}}function f(a){var b=0,c=-1,d=[],e=!0;this.set_indent=function(d){b=a.baseIndentLength+d*a.indent_length,c=d},this.get_character_count=function(){return b},this.is_empty=function(){return e},this.last=function(){return this._empty?null:d[d.length-1]},this.push=function(a){d.push(a),b+=a.length,e=!1},this.pop=function(){var a=null;return e||(a=d.pop(),b-=a.length,e=0===d.length),a},this.remove_indent=function(){c>0&&(c-=1,b-=a.indent_length)},this.trim=function(){for(;" "===this.last();){d.pop();b-=1}e=0===d.length},this.toString=function(){var b="";return this._empty||(c>=0&&(b=a.indent_cache[c]),b+=d.join("")),b}}function g(a,b){b=b||"",this.indent_cache=[b],this.baseIndentLength=b.length,this.indent_length=a.length,this.raw=!1;var c=[];this.baseIndentString=b,this.indent_string=a,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new f(this),c.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return c.length},this.add_new_line=function(a){return 1===this.get_line_number()&&this.just_added_newline()?!1:a||!this.just_added_newline()?(this.raw||this.add_outputline(),!0):!1},this.get_code=function(){var a=c.join("\n").replace(/[\r\n\t ]+$/,"");return a},this.set_indent=function(a){if(c.length>1){for(;a>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(a),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(a){for(var b=0;b<a.newlines;b++)this.add_outputline();this.current_line.push(a.whitespace_before),this.current_line.push(a.text),this.space_before_token=!1},this.add_token=function(a){this.add_space_before_token(),this.current_line.push(a)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(a){if(!a.multiline_frame&&a.mode!==j.ForInitializer&&a.mode!==j.Conditional)for(var b=a.start_line_index,d=c.length;d>b;)c[b].remove_indent(),b++},this.trim=function(d){for(d=void 0===d?!1:d,this.current_line.trim(a,b);d&&c.length>1&&this.current_line.is_empty();)c.pop(),this.current_line=c[c.length-1],this.current_line.trim();this.previous_line=c.length>1?c[c.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===c.length)return!0;var a=c[c.length-2];return a.is_empty()}return!1}}function h(c,d,e){function f(a){if(!a.match(x))return null;var b={};y.lastIndex=0;for(var c=y.exec(a);c;)b[c[1]]=c[2],c=y.exec(a);return b}function g(){var e,g=[];if(o=0,p="",s>=t)return["","TK_EOF"];var x;x=r.length?r[r.length-1]:new k("TK_START_BLOCK","{");var y=c.charAt(s);for(s+=1;a(y,j);){if(i.newline.test(y)?("\n"!==y||"\r"!==c.charAt(s-2))&&(o+=1,g=[]):g.push(y),s>=t)return["","TK_EOF"];y=c.charAt(s),s+=1}if(g.length&&(p=g.join("")),l.test(y)){var B=!0,C=!0,D=l;for("0"===y&&t>s&&/[Xx]/.test(c.charAt(s))?(B=!1,C=!1,y+=c.charAt(s),s+=1,D=m):(y="",s-=1);t>s&&D.test(c.charAt(s));)y+=c.charAt(s),s+=1,B&&t>s&&"."===c.charAt(s)&&(y+=c.charAt(s),s+=1,B=!1),C&&t>s&&/[Ee]/.test(c.charAt(s))&&(y+=c.charAt(s),s+=1,t>s&&/[+-]/.test(c.charAt(s))&&(y+=c.charAt(s),s+=1),C=!1,B=!1);return[y,"TK_WORD"]}if(i.isIdentifierStart(c.charCodeAt(s-1))){if(t>s)for(;i.isIdentifierChar(c.charCodeAt(s))&&(y+=c.charAt(s),s+=1,s!==t););return"TK_DOT"===x.type||"TK_RESERVED"===x.type&&a(x.text,["set","get"])||!a(y,u)?[y,"TK_WORD"]:"in"===y?[y,"TK_OPERATOR"]:[y,"TK_RESERVED"]}if("("===y||"["===y)return[y,"TK_START_EXPR"];if(")"===y||"]"===y)return[y,"TK_END_EXPR"];if("{"===y)return[y,"TK_START_BLOCK"];if("}"===y)return[y,"TK_END_BLOCK"];if(";"===y)return[y,"TK_SEMICOLON"];if("/"===y){var E="";if("*"===c.charAt(s)){s+=1,v.lastIndex=s;var F=v.exec(c);E="/*"+F[0],s+=F[0].length;var G=f(E);return G&&"start"===G.ignore&&(z.lastIndex=s,F=z.exec(c),E+=F[0],s+=F[0].length),E=E.replace(i.lineBreak,"\n"),[E,"TK_BLOCK_COMMENT",G]}if("/"===c.charAt(s)){s+=1,w.lastIndex=s;var F=w.exec(c);return E="//"+F[0],s+=F[0].length,[E,"TK_COMMENT"]}}if("`"===y||"'"===y||'"'===y||("/"===y||d.e4x&&"<"===y&&c.slice(s-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===x.type&&a(x.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===x.type&&")"===x.text&&x.parent&&"TK_RESERVED"===x.parent.type&&a(x.parent.text,["if","while","for"])||a(x.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var H=y,I=!1,J=!1;if(e=y,"/"===H)for(var K=!1;t>s&&(I||K||c.charAt(s)!==H)&&!i.newline.test(c.charAt(s));)e+=c.charAt(s),I?I=!1:(I="\\"===c.charAt(s),"["===c.charAt(s)?K=!0:"]"===c.charAt(s)&&(K=!1)),s+=1;else if(d.e4x&&"<"===H){var L=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,M=c.slice(s-1),N=L.exec(M);if(N&&0===N.index){for(var O=N[2],P=0;N;){var Q=!!N[1],R=N[2],S=!!N[N.length-1]||"![CDATA["===R.slice(0,8);if(R!==O||S||(Q?--P:++P),0>=P)break;N=L.exec(M)}var T=N?N.index+N[0].length:M.length;return M=M.slice(0,T),s+=T-1,M=M.replace(i.lineBreak,"\n"),[M,"TK_STRING"]}}else for(;t>s&&(I||c.charAt(s)!==H&&("`"===H||!i.newline.test(c.charAt(s))));)(I||"`"===H)&&i.newline.test(c.charAt(s))?("\r"===c.charAt(s)&&"\n"===c.charAt(s+1)&&(s+=1),e+="\n"):e+=c.charAt(s),I?(("x"===c.charAt(s)||"u"===c.charAt(s))&&(J=!0),I=!1):I="\\"===c.charAt(s),s+=1;if(J&&d.unescape_strings&&(e=h(e)),t>s&&c.charAt(s)===H&&(e+=H,s+=1,"/"===H))for(;t>s&&i.isIdentifierStart(c.charCodeAt(s));)e+=c.charAt(s),s+=1;return[e,"TK_STRING"]}if("#"===y){if(0===r.length&&"!"===c.charAt(s)){for(e=y;t>s&&"\n"!==y;)y=c.charAt(s),e+=y,s+=1;return[b(e)+"\n","TK_UNKNOWN"]}var U="#";if(t>s&&l.test(c.charAt(s))){do y=c.charAt(s),U+=y,s+=1;while(t>s&&"#"!==y&&"="!==y);return"#"===y||("["===c.charAt(s)&&"]"===c.charAt(s+1)?(U+="[]",s+=2):"{"===c.charAt(s)&&"}"===c.charAt(s+1)&&(U+="{}",s+=2)),[U,"TK_WORD"]}}if("<"===y&&("?"===c.charAt(s)||"%"===c.charAt(s))){A.lastIndex=s-1;var V=A.exec(c);if(V)return y=V[0],s+=y.length-1,y=y.replace(i.lineBreak,"\n"),[y,"TK_STRING"]}if("<"===y&&"<!--"===c.substring(s-1,s+3)){for(s+=3,y="<!--";!i.newline.test(c.charAt(s))&&t>s;)y+=c.charAt(s),s++;return q=!0,[y,"TK_COMMENT"]}if("-"===y&&q&&"-->"===c.substring(s-1,s+2))return q=!1,s+=2,["-->","TK_COMMENT"];if("."===y)return[y,"TK_DOT"];if(a(y,n)){for(;t>s&&a(y+c.charAt(s),n)&&(y+=c.charAt(s),s+=1,!(s>=t)););return","===y?[y,"TK_COMMA"]:"="===y?[y,"TK_EQUALS"]:[y,"TK_OPERATOR"]}return[y,"TK_UNKNOWN"]}function h(a){for(var b,c=!1,d="",e=0,f="",g=0;c||e<a.length;)if(b=a.charAt(e),e++,c){if(c=!1,"x"===b)f=a.substr(e,2),e+=2;else{if("u"!==b){d+="\\"+b;continue}f=a.substr(e,4),e+=4}if(!f.match(/^[0123456789abcdefABCDEF]+$/))return a;if(g=parseInt(f,16),g>=0&&32>g){d+="x"===b?"\\x"+f:"\\u"+f;continue}if(34===g||39===g||92===g)d+="\\"+String.fromCharCode(g);else{if("x"===b&&g>126&&255>=g)return a;d+=String.fromCharCode(g)}}else"\\"===b?c=!0:d+=b;return d}var j="\n\r	 ".split(""),l=/[0-9]/,m=/[0123456789abcdefABCDEF]/,n="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: => <%= <% %> <?= <? ?>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var o,p,q,r,s,t,u=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),v=/([\s\S]*?)((?:\*\/)|$)/g,w=/([^\n\r\u2028\u2029]*)/g,x=/\/\* beautify( \w+[:]\w+)+ \*\//g,y=/ (\w+)[:](\w+)/g,z=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,A=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){t=c.length,s=0,q=!1,r=[];for(var a,b,d,e=null,f=[],h=[];!b||"TK_EOF"!==b.type;){for(d=g(),a=new k(d[1],d[0],o,p);"TK_COMMENT"===a.type||"TK_BLOCK_COMMENT"===a.type||"TK_UNKNOWN"===a.type;)"TK_BLOCK_COMMENT"===a.type&&(a.directives=d[2]),h.push(a),d=g(),a=new k(d[1],d[0],o,p);h.length&&(a.comments_before=h,h=[]),"TK_START_BLOCK"===a.type||"TK_START_EXPR"===a.type?(a.parent=b,f.push(e),e=a):("TK_END_BLOCK"===a.type||"TK_END_EXPR"===a.type)&&e&&("]"===a.text&&"["===e.text||")"===a.text&&"("===e.text||"}"===a.text&&"{"===e.text)&&(a.parent=e.parent,e=f.pop()),r.push(a),b=a}return r}}var i={};!function(a){var b="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",c="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",d=new RegExp("["+b+"]"),e=new RegExp("["+b+c+"]");a.newline=/[\n\r\u2028\u2029]/,a.lineBreak=/\r\n|[\n\r\u2028\u2029]/g,a.isIdentifierStart=function(a){return 65>a?36===a:91>a?!0:97>a?95===a:123>a?!0:a>=170&&d.test(String.fromCharCode(a))},a.isIdentifierChar=function(a){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:a>=170&&e.test(String.fromCharCode(a))}}(i);var j={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},k=function(a,b,c,d,e,f){this.type=a,this.text=b,this.comments_before=[],this.newlines=c||0,this.wanted_newline=c>0,this.whitespace_before=d||"",this.parent=null,this.directives=null};"function"==typeof define&&define.amd?define([],function(){return{js_beautify:d}}):"undefined"!=typeof exports?exports.js_beautify=d:"undefined"!=typeof window?window.js_beautify=d:"undefined"!=typeof global&&(global.js_beautify=d)}(),function(){function a(b,c){function d(){return u=b.charAt(++w),u||""}function e(a){var c="",e=w;return a&&h(),c=b.charAt(w+1)||"",w=e-1,d(),c}function f(a){for(var c=w;d();)if("\\"===u)d();else{if(-1!==a.indexOf(u))break;if("\n"===u)break}return b.substring(c,w+1)}function g(a){var b=w,c=f(a);return w=b-1,d(),c}function h(){for(var a="";v.test(e());)d(),a+=u;return a}function i(){var a="";for(u&&v.test(u)&&(a=u);v.test(d());)a+=u;return a}function j(a){var c=w;for(a="/"===e(),d();d();){if(!a&&"*"===u&&"/"===e()){d();break}if(a&&"\n"===u)return b.substring(c,w)}return b.substring(c,w)+u}function k(a){return b.substring(w-a.length,w).toLowerCase()===a}function l(){for(var a=0,c=w+1;c<b.length;c++){var d=b.charAt(c);if("{"===d)return!0;if("("===d)a+=1;else if(")"===d){if(0==a)return!1;a-=1}else if(";"===d||"}"===d)return!1}return!1}function m(){A++,y+=z}function n(){A--,y=y.slice(0,-o)}c=c||{},b=b||"",b=b.replace(/\r\n|[\r\u2028\u2029]/g,"\n");var o=c.indent_size||4,p=c.indent_char||" ",q=void 0===c.selector_separator_newline?!0:c.selector_separator_newline,r=void 0===c.end_with_newline?!1:c.end_with_newline,s=void 0===c.newline_between_rules?!0:c.newline_between_rules,t=c.eol?c.eol:"\n";"string"==typeof o&&(o=parseInt(o,10)),c.indent_with_tabs&&(p="	",o=1),t=t.replace(/\\r/,"\r").replace(/\\n/,"\n");var u,v=/^\s+$/,w=-1,x=0,y=b.match(/^[\t ]*/)[0],z=new Array(o+1).join(p),A=0,B=0,C={};C["{"]=function(a){C.singleSpace(),D.push(a),C.newLine()},C["}"]=function(a){C.newLine(),D.push(a),C.newLine()},C._lastCharWhitespace=function(){return v.test(D[D.length-1])},C.newLine=function(a){D.length&&(a||"\n"===D[D.length-1]||C.trim(),D.push("\n"),y&&D.push(y))},C.singleSpace=function(){D.length&&!C._lastCharWhitespace()&&D.push(" ")},C.preserveSingleSpace=function(){K&&C.singleSpace()},C.trim=function(){for(;C._lastCharWhitespace();)D.pop()};for(var D=[],E=!1,F=!1,G=!1,H="",I="";;){var J=i(),K=""!==J,L=-1!==J.indexOf("\n");if(I=H,H=u,!u)break;if("/"===u&&"*"===e()){var M=0===A;(L||M)&&C.newLine(),D.push(j()),C.newLine(),M&&C.newLine(!0)}else if("/"===u&&"/"===e())L||"{"===I||C.trim(),C.singleSpace(),D.push(j()),C.newLine();else if("@"===u){C.preserveSingleSpace(),D.push(u);var N=g(": ,;{}()[]/='\"");N.match(/[ :]$/)&&(d(),N=f(": ").replace(/\s$/,""),D.push(N),C.singleSpace()),N=N.replace(/\s$/,""),N in a.NESTED_AT_RULE&&(B+=1,N in a.CONDITIONAL_GROUP_RULE&&(G=!0))}else"#"===u&&"{"===e()?(C.preserveSingleSpace(),D.push(f("}"))):"{"===u?"}"===e(!0)?(h(),d(),C.singleSpace(),D.push("{}"),C.newLine(),s&&0===A&&C.newLine(!0)):(m(),C["{"](u),G?(G=!1,E=A>B):E=A>=B):"}"===u?(n(),C["}"](u),E=!1,F=!1,B&&B--,s&&0===A&&C.newLine(!0)):":"===u?(h(),!E&&!G||k("&")||l()?":"===e()?(d(),D.push("::")):D.push(":"):(F=!0,D.push(":"),C.singleSpace())):'"'===u||"'"===u?(C.preserveSingleSpace(),D.push(f(u))):";"===u?(F=!1,D.push(u),C.newLine()):"("===u?k("url")?(D.push(u),h(),d()&&(")"!==u&&'"'!==u&&"'"!==u?D.push(f(")")):w--)):(x++,C.preserveSingleSpace(),D.push(u),h()):")"===u?(D.push(u),x--):","===u?(D.push(u),h(),q&&!F&&1>x?C.newLine():C.singleSpace()):"]"===u?D.push(u):"["===u?(C.preserveSingleSpace(),D.push(u)):"="===u?(h(),u="=",D.push(u)):(C.preserveSingleSpace(),D.push(u))}var O="";return y&&(O+=y),O+=D.join("").replace(/[\r\n\t ]+$/,""),r&&(O+="\n"),"\n"!=t&&(O=O.replace(/[\n]/g,t)),O}a.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},a.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},"function"==typeof define&&define.amd?define([],function(){return{css_beautify:a}}):"undefined"!=typeof exports?exports.css_beautify=a:"undefined"!=typeof window?window.css_beautify=a:"undefined"!=typeof global&&(global.css_beautify=a)}(),function(){function a(a){return a.replace(/^\s+/g,"")}function b(a){return a.replace(/\s+$/g,"")}function c(c,d,e,f){function g(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=i,this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:u,in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}},this.is_whitespace=function(a){for(var b=0;b<a.length;a++)if(!this.Utils.in_array(a.charAt(b),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var a="";if(a=this.input.charAt(this.pos),this.Utils.in_array(a,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(a,this.Utils.whitespace);)o&&"\n"===a&&this.newlines<=p&&(this.newlines+=1),this.pos++,a=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(a){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,a),this.print_indentation(a)):(this.line_char_count++,a.push(" "))},this.get_content=function(){for(var a="",b=[];"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(b);else{if(q){var c=this.input.substr(this.pos,3);if("{{#"===c||"{{/"===c)break;if("{{!"===c)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}a=this.input.charAt(this.pos),this.pos++,this.line_char_count++,b.push(a)}}return b.length?b.join(""):""},this.get_contents_to=function(a){if(this.pos===this.input.length)return["","TK_EOF"];var b="",c=new RegExp("</"+a+"\\s*>","igm");c.lastIndex=this.pos;var d=c.exec(this.input),e=d?d.index:this.input.length;return this.pos<e&&(b=this.input.substring(this.pos,e),this.pos=e),b},this.record_tag=function(a){this.tags[a+"count"]?(this.tags[a+"count"]++,this.tags[a+this.tags[a+"count"]]=this.indent_level):(this.tags[a+"count"]=1,this.tags[a+this.tags[a+"count"]]=this.indent_level),this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent,this.tags.parent=a+this.tags[a+"count"]},this.retrieve_tag=function(a){
if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]),delete this.tags[a+this.tags[a+"count"]+"parent"],delete this.tags[a+this.tags[a+"count"]],1===this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}},this.indent_to_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]])}},this.get_tag=function(a){var b,c,d,e="",f=[],g="",h=!1,i=!0,j=this.pos,l=this.line_char_count;a=void 0!==a?a:!1;do{if(this.pos>=this.input.length)return a&&(this.pos=j,this.line_char_count=l),f.length?f.join(""):["","TK_EOF"];if(e=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(e,this.Utils.whitespace))h=!0;else{if(("'"===e||'"'===e)&&(e+=this.get_unformatted(e),h=!0),"="===e&&(h=!1),f.length&&"="!==f[f.length-1]&&">"!==e&&h){if(this.space_or_wrap(f),h=!1,!i&&"force"===r&&"/"!==e){this.print_newline(!0,f),this.print_indentation(f);for(var m=0;s>m;m++)f.push(k)}for(var o=0;o<f.length;o++)if(" "===f[o]){i=!1;break}}if(q&&"<"===d&&e+this.input.charAt(this.pos)==="{{"&&(e+=this.get_unformatted("}}"),f.length&&" "!==f[f.length-1]&&"<"!==f[f.length-1]&&(e=" "+e),h=!0),"<"!==e||d||(b=this.pos-1,d="<"),q&&!d&&f.length>=2&&"{"===f[f.length-1]&&"{"===f[f.length-2]&&(b="#"===e||"/"===e||"!"===e?this.pos-3:this.pos-2,d="{"),this.line_char_count++,f.push(e),f[1]&&("!"===f[1]||"?"===f[1]||"%"===f[1])){f=[this.get_comment(b)];break}if(q&&f[1]&&"{"===f[1]&&f[2]&&"!"===f[2]){f=[this.get_comment(b)];break}if(q&&"{"===d&&f.length>2&&"}"===f[f.length-2]&&"}"===f[f.length-1])break}}while(">"!==e);var p,t,u=f.join("");p=-1!==u.indexOf(" ")?u.indexOf(" "):"{"===u.charAt(0)?u.indexOf("}"):u.indexOf(">"),t="<"!==u.charAt(0)&&q?"#"===u.charAt(2)?3:2:1;var v=u.substring(t,p).toLowerCase();return"/"===u.charAt(u.length-2)||this.Utils.in_array(v,this.Utils.single_token)?a||(this.tag_type="SINGLE"):q&&"{"===u.charAt(0)&&"else"===v?a||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(v,n)?(g=this.get_unformatted("</"+v+">",u),f.push(g),c=this.pos-1,this.tag_type="SINGLE"):"script"===v&&(-1===u.search("type")||u.search("type")>-1&&u.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?a||(this.record_tag(v),this.tag_type="SCRIPT"):"style"===v&&(-1===u.search("type")||u.search("type")>-1&&u.search("text/css")>-1)?a||(this.record_tag(v),this.tag_type="STYLE"):"!"===v.charAt(0)?a||(this.tag_type="SINGLE",this.traverse_whitespace()):a||("/"===v.charAt(0)?(this.retrieve_tag(v.substring(1)),this.tag_type="END"):(this.record_tag(v),"html"!==v.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(f),this.Utils.in_array(v,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),a&&(this.pos=j,this.line_char_count=l),f.join("")},this.get_comment=function(a){var b="",c=">",d=!1;for(this.pos=a,input_char=this.input.charAt(this.pos),this.pos++;this.pos<=this.input.length&&(b+=input_char,b.charAt(b.length-1)!==c.charAt(c.length-1)||-1===b.indexOf(c));)!d&&b.length<10&&(0===b.indexOf("<![if")?(c="<![endif]>",d=!0):0===b.indexOf("<![cdata[")?(c="]]>",d=!0):0===b.indexOf("<![")?(c="]>",d=!0):0===b.indexOf("<!--")?(c="-->",d=!0):0===b.indexOf("{{!")?(c="}}",d=!0):0===b.indexOf("<?")?(c="?>",d=!0):0===b.indexOf("<%")&&(c="%>",d=!0)),input_char=this.input.charAt(this.pos),this.pos++;return b},this.get_unformatted=function(a,b){if(b&&-1!==b.toLowerCase().indexOf(a))return"";var c="",d="",e=0,f=!0;do{if(this.pos>=this.input.length)return d;if(c=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(c,this.Utils.whitespace)){if(!f){this.line_char_count--;continue}if("\n"===c||"\r"===c){d+="\n",this.line_char_count=0;continue}}d+=c,this.line_char_count++,f=!0,q&&"{"===c&&d.length&&"{"===d.charAt(d.length-2)&&(d+=this.get_unformatted("}}"),e=d.length)}while(-1===d.toLowerCase().indexOf(a,e));return d},this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var b=this.last_token.substr(7);return a=this.get_contents_to(b),"string"!=typeof a?a:[a,"TK_"+b]}if("CONTENT"===this.current_mode)return a=this.get_content(),"string"!=typeof a?a:[a,"TK_CONTENT"];if("TAG"===this.current_mode){if(a=this.get_tag(),"string"!=typeof a)return a;var c="TK_TAG_"+this.tag_type;return[a,c]}},this.get_full_indent=function(a){return a=this.indent_level+a||0,1>a?"":Array(a+1).join(this.indent_string)},this.is_unformatted=function(a,b){if(!this.Utils.in_array(a,b))return!1;if("a"!==a.toLowerCase()||!this.Utils.in_array("a",b))return!0;var c=this.get_tag(!0),d=(c||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!d||this.Utils.in_array(d,b)?!0:!1},this.printer=function(c,d,e,f,g){this.input=c||"",this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n"),this.output=[],this.indent_character=d,this.indent_string="",this.indent_size=e,this.brace_style=g,this.indent_level=0,this.wrap_line_length=f,this.line_char_count=0;for(var h=0;h<this.indent_size;h++)this.indent_string+=this.indent_character;this.print_newline=function(a,c){this.line_char_count=0,c&&c.length&&(a||"\n"!==c[c.length-1])&&("\n"!==c[c.length-1]&&(c[c.length-1]=b(c[c.length-1])),c.push("\n"))},this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(b){(!this.is_whitespace(b)||this.output.length)&&((b||""!==b)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),b=a(b)),this.print_token_raw(b))},this.print_token_raw=function(a){this.newlines>0&&(a=b(a)),a&&""!==a&&(a.length>1&&"\n"===a.charAt(a.length-1)?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(var c=0;c<this.newlines;c++)this.print_newline(c>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;for(d=d||{},void 0!==d.wrap_line_length&&0!==parseInt(d.wrap_line_length,10)||void 0===d.max_char||0===parseInt(d.max_char,10)||(d.wrap_line_length=d.max_char),i=void 0===d.indent_inner_html?!1:d.indent_inner_html,j=void 0===d.indent_size?4:parseInt(d.indent_size,10),k=void 0===d.indent_char?" ":d.indent_char,m=void 0===d.brace_style?"collapse":d.brace_style,l=0===parseInt(d.wrap_line_length,10)?32786:parseInt(d.wrap_line_length||250,10),n=d.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],o=void 0===d.preserve_newlines?!0:d.preserve_newlines,p=o?isNaN(parseInt(d.max_preserve_newlines,10))?32786:parseInt(d.max_preserve_newlines,10):0,q=void 0===d.indent_handlebars?!1:d.indent_handlebars,r=void 0===d.wrap_attributes?"auto":d.wrap_attributes,s=void 0===d.wrap_attributes_indent_size?j:parseInt(d.wrap_attributes_indent_size,10)||j,t=void 0===d.end_with_newline?!1:d.end_with_newline,u="object"==typeof d.extra_liners&&d.extra_liners?d.extra_liners.concat():"string"==typeof d.extra_liners?d.extra_liners.split(","):"head,body,/html".split(","),v=d.eol?d.eol:"\n",d.indent_with_tabs&&(k="	",j=1),v=v.replace(/\\r/,"\r").replace(/\\n/,"\n"),h=new g,h.printer(c,k,j,l,m);;){var w=h.get_token();if(h.token_text=w[0],h.token_type=w[1],"TK_EOF"===h.token_type)break;switch(h.token_type){case"TK_TAG_START":h.print_newline(!1,h.output),h.print_token(h.token_text),h.indent_content&&(h.indent(),h.indent_content=!1),h.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":h.print_newline(!1,h.output),h.print_token(h.token_text),h.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===h.last_token&&""===h.last_text){var x=h.token_text.match(/\w+/)[0],y=null;h.output.length&&(y=h.output[h.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null===y||y[1]!==x&&!h.Utils.in_array(y[1],n))&&h.print_newline(!1,h.output)}h.print_token(h.token_text),h.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var z=h.token_text.match(/^\s*<([a-z-]+)/i);z&&h.Utils.in_array(z[1],n)||h.print_newline(!1,h.output),h.print_token(h.token_text),h.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":h.print_token(h.token_text),h.indent_content&&(h.indent(),h.indent_content=!1),h.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":h.print_token(h.token_text),h.current_mode="TAG";break;case"TK_CONTENT":h.print_token(h.token_text),h.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==h.token_text){h.print_newline(!1,h.output);var A,B=h.token_text,C=1;"TK_SCRIPT"===h.token_type?A="function"==typeof e&&e:"TK_STYLE"===h.token_type&&(A="function"==typeof f&&f),"keep"===d.indent_scripts?C=0:"separate"===d.indent_scripts&&(C=-h.indent_level);var D=h.get_full_indent(C);if(A){var E=function(){this.eol="\n"};E.prototype=d;var F=new E;B=A(B.replace(/^\s*/,D),F)}else{var G=B.match(/^\s*/)[0],H=G.match(/[^\n\r]*$/)[0].split(h.indent_string).length-1,I=h.get_full_indent(C-H);B=B.replace(/^\s*/,D).replace(/\r\n|\r|\n/g,"\n"+I).replace(/\s+$/,"")}B&&(h.print_token_raw(B),h.print_newline(!0,h.output))}h.current_mode="TAG";break;default:""!==h.token_text&&h.print_token(h.token_text)}h.last_token=h.token_type,h.last_text=h.token_text}var J=h.output.join("").replace(/[\r\n\t ]+$/,"");return t&&(J+="\n"),"\n"!=v&&(J=J.replace(/[\n]/g,v)),J}if("function"==typeof define&&define.amd)define(["require","./beautify","./beautify-css"],function(a){var b=a("./beautify"),d=a("./beautify-css");return{html_beautify:function(a,e){return c(a,e,b.js_beautify,d.css_beautify)}}});else if("undefined"!=typeof exports){var d=require("./beautify.js"),e=require("./beautify-css.js");exports.html_beautify=function(a,b){return c(a,b,d.js_beautify,e.css_beautify)}}else"undefined"!=typeof window?window.html_beautify=function(a,b){return c(a,b,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(a,b){return c(a,b,global.js_beautify,global.css_beautify)})}(),function(a){function b(b){if("string"==typeof b.data&&(b.data={keys:b.data}),b.data&&b.data.keys&&"string"==typeof b.data.keys){var c=b.handler,d=b.data.keys.toLowerCase().split(" ");b.handler=function(b){if(this===b.target||!(/textarea|select/i.test(b.target.nodeName)||a.hotkeys.options.filterTextInputs&&a.inArray(b.target.type,a.hotkeys.textAcceptingInputTypes)>-1)){var e="keypress"!==b.type&&a.hotkeys.specialKeys[b.which],f=String.fromCharCode(b.which).toLowerCase(),g="",h={};a.each(["alt","ctrl","shift"],function(a,c){b[c+"Key"]&&e!==c&&(g+=c+"+")}),b.metaKey&&!b.ctrlKey&&"meta"!==e&&(g+="meta+"),b.metaKey&&"meta"!==e&&g.indexOf("alt+ctrl+shift+")>-1&&(g=g.replace("alt+ctrl+shift+","hyper+")),e?h[g+e]=!0:(h[g+f]=!0,h[g+a.hotkeys.shiftNums[f]]=!0,"shift+"===g&&(h[a.hotkeys.shiftNums[f]]=!0));for(var i=0,j=d.length;j>i;i++)if(h[d[i]])return c.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],options:{filterTextInputs:!0}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})}(jQuery||this.jQuery||window.jQuery),function(a){"use strict";"object"==typeof exports?module.exports=a(window.jQuery):"function"==typeof define&&define.amd?define(["jquery"],a):window.jQuery&&!window.jQuery.fn.colorpicker&&a(window.jQuery)}(function(a){"use strict";var b=function(b,c){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,c&&a.extend(this.colors,c),b&&(void 0!==b.toLowerCase?(b+="",this.setColor(b)):void 0!==b.h&&(this.value=b))};b.prototype={constructor:b,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(a){return"number"==typeof a?a:isNaN(a)||null===a||""===a||void 0===a?1:void 0!==a.toLowerCase?parseFloat(a):1},isTransparent:function(a){return a?(a=a.toLowerCase().trim(),"transparent"===a||a.match(/#?00000000/)||a.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/)):!1},rgbaIsTransparent:function(a){return 0===a.r&&0===a.g&&0===a.b&&0===a.a},setColor:function(a){a=a.toLowerCase().trim(),a&&(this.isTransparent(a)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(a)||{h:0,s:0,b:0,a:1})},stringToHSB:function(b){b=b.toLowerCase();var c;"undefined"!=typeof this.colors[b]&&(b=this.colors[b],c="alias");var d=this,e=!1;return a.each(this.stringParsers,function(a,f){var g=f.re.exec(b),h=g&&f.parse.apply(d,[g]),i=c||f.format||"rgba";return h?(e=i.match(/hsla?/)?d.RGBtoHSB.apply(d,d.HSLtoRGB.apply(d,h)):d.RGBtoHSB.apply(d,h),d.origFormat=i,!1):!0}),e},setHue:function(a){this.value.h=1-a},setSaturation:function(a){this.value.s=a},setBrightness:function(a){this.value.b=1-a},setAlpha:function(a){this.value.a=parseInt(100*(1-a),10)/100},toRGB:function(a,b,c,d){a||(a=this.value.h,b=this.value.s,c=this.value.b),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Math.abs(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],{r:Math.round(255*e),g:Math.round(255*f),b:Math.round(255*g),a:d||this.value.a}},toHex:function(a,b,c,d){var e=this.toRGB(a,b,c,d);return this.rgbaIsTransparent(e)?"transparent":"#"+(1<<24|parseInt(e.r)<<16|parseInt(e.g)<<8|parseInt(e.b)).toString(16).substr(1)},toHSL:function(a,b,c,d){a=a||this.value.h,b=b||this.value.s,c=c||this.value.b,d=d||this.value.a;var e=a,f=(2-b)*c,g=b*c;return g/=f>0&&1>=f?f:2-f,f/=2,g>1&&(g=1),{h:isNaN(e)?0:e,s:isNaN(g)?0:g,l:isNaN(f)?0:f,a:isNaN(d)?0:d}},toAlias:function(a,b,c,d){var e=this.toHex(a,b,c,d);for(var f in this.colors)if(this.colors[f]===e)return f;return!1},RGBtoHSB:function(a,b,c,d){a/=255,b/=255,c/=255;var e,f,g,h;return g=Math.max(a,b,c),h=g-Math.min(a,b,c),e=0===h?null:g===a?(b-c)/h:g===b?(c-a)/h+2:(a-b)/h+4,e=(e+360)%6*60/360,f=0===h?0:h/g,{h:this._sanitizeNumber(e),s:f,b:g,a:this._sanitizeNumber(d)}},HueToRGB:function(a,b,c){return 0>c?c+=1:c>1&&(c-=1),1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a},HSLtoRGB:function(a,b,c,d){0>b&&(b=0);var e;e=.5>=c?c*(1+b):c+b-c*b;var f=2*c-e,g=a+1/3,h=a,i=a-1/3,j=Math.round(255*this.HueToRGB(f,e,g)),k=Math.round(255*this.HueToRGB(f,e,h)),l=Math.round(255*this.HueToRGB(f,e,i));return[j,k,l,this._sanitizeNumber(d)]},toString:function(a){a=a||"rgba";var b=!1;switch(a){case"rgb":return b=this.toRGB(),this.rgbaIsTransparent(b)?"transparent":"rgb("+b.r+","+b.g+","+b.b+")";case"rgba":return b=this.toRGB(),"rgba("+b.r+","+b.g+","+b.b+","+b.a+")";case"hsl":return b=this.toHSL(),"hsl("+Math.round(360*b.h)+","+Math.round(100*b.s)+"%,"+Math.round(100*b.l)+"%)";case"hsla":return b=this.toHSL(),"hsla("+Math.round(360*b.h)+","+Math.round(100*b.s)+"%,"+Math.round(100*b.l)+"%,"+b.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return b}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(a){return[a[1],a[2],a[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16),1]}}],colorNameToHex:function(a){return"undefined"!=typeof this.colors[a.toLowerCase()]?this.colors[a.toLowerCase()]:!1}};var c={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},d=function(d,e){if(this.element=a(d).addClass("colorpicker-element"),this.options=a.extend(!0,{},c,this.element.data(),e),this.component=this.options.component,this.component=this.component!==!1?this.element.find(this.component):!1,this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1?a(this.container):!1,this.input=this.element.is("input")?this.element:this.options.input?this.element.find(this.options.input):!1,this.input&&0===this.input.length&&(this.input=!1),this.color=new b(this.options.color!==!1?this.options.color:this.getValue(),this.options.colorSelectors),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.picker=a(this.options.template),this.options.customClass&&this.picker.addClass(this.options.customClass),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format||this.options.format===!1)&&this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.options.colorSelectors){var f=this;a.each(this.options.colorSelectors,function(b,c){var d=a("<i />").css("background-color",c).data("class",b);d.click(function(){f.setValue(a(this).css("background-color"))}),f.picker.find(".colorpicker-selectors").append(d)}),this.picker.find(".colorpicker-selectors").show()}this.picker.on("mousedown.colorpicker touchstart.colorpicker",a.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:a("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":a.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":a.proxy(this.change,this)}),this.component===!1&&this.element.on({"focus.colorpicker":a.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":a.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":a.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":a.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":a.proxy(this.show,this),"focus.colorpicker":a.proxy(this.show,this)}),this.update(),a(a.proxy(function(){this.element.trigger("create")},this))};d.Color=b,d.prototype={constructor:d,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var a=this.container&&this.container[0]!==document.body?"position":"offset",b=this.component||this.element,c=b[a]();"right"===this.options.align&&(c.left-=this.picker.outerWidth()-b.outerWidth()),this.picker.css({top:c.top+b.outerHeight(),left:c.left})},show:function(b){return this.isDisabled()?!1:(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),a(window).on("resize.colorpicker",a.proxy(this.reposition,this)),!b||this.hasInput()&&"color"!==this.input.attr("type")||b.stopPropagation&&b.preventDefault&&(b.stopPropagation(),b.preventDefault()),this.options.inline===!1&&a(window.document).on({"mousedown.colorpicker":a.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),a(window).off("resize.colorpicker",this.reposition),a(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(a){return a=a||this.color.toString(this.format),this.element.data("color",a),a},updateInput:function(a){if(a=a||this.color.toString(this.format),this.input!==!1){if(this.options.colorSelectors){var c=new b(a,this.options.colorSelectors),d=c.toAlias();"undefined"!=typeof this.options.colorSelectors[d]&&(a=d)}this.input.prop("value",a)}return a},updatePicker:function(a){void 0!==a&&(this.color=new b(a,this.options.colorSelectors));var c=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,d=this.picker.find("i");return 0!==d.length?(this.options.horizontal===!1?(c=this.options.sliders,d.eq(1).css("top",c.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",c.alpha.maxTop*(1-this.color.value.a))):(c=this.options.slidersHorz,d.eq(1).css("left",c.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",c.alpha.maxLeft*(1-this.color.value.a))),d.eq(0).css({top:c.saturation.maxTop-this.color.value.b*c.saturation.maxTop,left:this.color.value.s*c.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),a):void 0},updateComponent:function(a){if(a=a||this.color.toString(this.format),this.component!==!1){var b=this.component.find("i").eq(0);b.length>0?b.css({backgroundColor:a}):this.component.css({backgroundColor:a})}return a},update:function(a){var b;return(this.getValue(!1)!==!1||a===!0)&&(b=this.updateComponent(),this.updateInput(b),this.updateData(b),this.updatePicker()),b},setValue:function(a){this.color=new b(a,this.options.colorSelectors),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:a})},getValue:function(a){a=void 0===a?"#000000":a;var b;return b=this.hasInput()?this.input.val():this.element.data("color"),(void 0===b||""===b||null===b)&&(b=a),b},hasInput:function(){return this.input!==!1},isDisabled:function(){return this.hasInput()?this.input.prop("disabled")===!0:!1},disable:function(){return this.hasInput()?(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0):!1},enable:function(){return this.hasInput()?(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0):!1},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(b){b.pageX||b.pageY||!b.originalEvent||(b.pageX=b.originalEvent.touches[0].pageX,b.pageY=b.originalEvent.touches[0].pageY),b.stopPropagation(),b.preventDefault();var c=a(b.target),d=c.closest("div"),e=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!d.is(".colorpicker")){if(d.is(".colorpicker-saturation"))this.currentSlider=a.extend({},e.saturation);else if(d.is(".colorpicker-hue"))this.currentSlider=a.extend({},e.hue);else{if(!d.is(".colorpicker-alpha"))return!1;this.currentSlider=a.extend({},e.alpha)}var f=d.offset();this.currentSlider.guide=d.find("i")[0].style,this.currentSlider.left=b.pageX-f.left,this.currentSlider.top=b.pageY-f.top,this.mousePointer={left:b.pageX,top:b.pageY},a(document).on({"mousemove.colorpicker":a.proxy(this.mousemove,this),"touchmove.colorpicker":a.proxy(this.mousemove,this),"mouseup.colorpicker":a.proxy(this.mouseup,this),"touchend.colorpicker":a.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(a){a.pageX||a.pageY||!a.originalEvent||(a.pageX=a.originalEvent.touches[0].pageX,a.pageY=a.originalEvent.touches[0].pageY),a.stopPropagation(),a.preventDefault();var b=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((a.pageX||this.mousePointer.left)-this.mousePointer.left))),c=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((a.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=b+"px",this.currentSlider.guide.top=c+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,b/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,c/this.currentSlider.maxTop),"setAlpha"===this.currentSlider.callTop&&this.options.format===!1&&(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(b){return b.stopPropagation(),b.preventDefault(),a(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(a){this.keyup(a)},keyup:function(a){38===a.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===a.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=new b(this.input.val(),this.options.colorSelectors),this.color.origFormat&&this.options.format===!1&&(this.format=this.color.origFormat),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},a.colorpicker=d,a.fn.colorpicker=function(b){var c,e=arguments,f=this.each(function(){var f=a(this),g=f.data("colorpicker"),h="object"==typeof b?b:{};g||"string"==typeof b?"string"==typeof b&&(c=g[b].apply(g,Array.prototype.slice.call(e,1))):f.data("colorpicker",new d(this,h))});return"getValue"===b?c:f},a.fn.colorpicker.constructor=d}),function(a){window.File.prototype.convertToBase64=function(a){var b=new FileReader;b.onload=function(b){a(b.target.result)},b.readAsDataURL(this)};var b=a.extend(!0,{klass:function(c,d){d=d||{},this.$=c,this.options=a.extend(!0,{height:450,resizer:!0,beautifyHtml:{indent_size:2,preserve_newlines:!0},image:{objectUrl:!0}},d),this.applyChanges=b.fn.applyChanges,this.execCallbacks=b.fn.execCallbacks,this.extendOptions=b.fn.extendOptions,this.switchView=b.fn.switchView,this.toggleFullscreen=b.fn.toggleFullscreen,this.tidyHtml=b.fn.tidyHtml,this.dataURItoBlob=b.fn.dataURItoBlob,this.insertFiles=b.fn.insertFiles,this.insertFile=b.fn.insertFile,this.wrapper=new b.wrapper.klass(this),this.editor=new b.editor.klass(this),this.codeview=new b.codeview.klass(this),this.execCallbacks(b.callbacks.afterInitialize)},callbacks:{afterInitialize:[]},fn:{applyChanges:function(a){this.$.val(a)},execCallbacks:function(a,c){if(a){if(a instanceof Array){var d=this,e=!0;return a.forEach(function(a){e=b.fn.execCallbacks.call(d,a,c)&&e}),e}if("function"==typeof a)return a.call(this,c)}},extendOptions:function(b){this.options=a.extend(!0,b,this.options)},switchView:function(a){this.$.trigger({type:"monkey:beforeViewSwitch",toView:a}),this.previousView=this.activeView,this.activeView=a,this.$.trigger({
type:"monkey:afterViewSwitch",toView:a})},toggleFullscreen:function(a){this.wrapper.$.toggleClass("mk-fullscreen",a),this.fullscreen=a,this.$.trigger({type:"monkey:toggleFullscreen",fullscreen:a})},tidyHtml:function(a){return window.html_beautify?window.html_beautify(a,this.options.beautifyHtml):a},dataURItoBlob:function(a){var b;b=a.split(",")[0].indexOf("base64")>=0?atob(a.split(",")[1]):window.unescape(a.split(",")[1]);for(var c=a.split(",")[0].split(":")[1].split(";")[0],d=new Uint8Array(b.length),e=0;e<b.length;e++)d[e]=b.charCodeAt(e);return new Blob([d],{type:c})},insertFile:function(a){if(a){var b=this.editor,c=b.execCommand("insertImage "+a);b.$.trigger({type:"monkey:fileInserted",insertedElement:c})}},insertFiles:function(a){for(var b,c=this,d=window.URL||window.webkitURL,e=c.editor,f=0;b=a[f];f++)if(/^image\//.test(b.type))if(e.options.image.objectUrl)try{if(d){var g=d.createObjectURL(b);c.insertFile(g)}}catch(h){console.error(h)}else b.convertToBase64(function(a){c.insertFile(a)})}},bindings:{}},window.monkey||{});b.wrapper={klass:function(a){this.$=b.wrapper.views.makeWrapper(a),this.$.insertAfter(a.$),a.options.resizer&&(this.$resizer=b.wrapper.views.makeResizer(a,this).insertAfter(this.$),this.$resizer.on("mousedown",b.wrapper.bindings.resizeBarMousedown))},views:{makeWrapper:function(b){return a('<div class="mk-wrapper">').css({height:b.options.height})},makeResizer:function(b,c){return c.$.addClass("mk-resizable"),a('<div class="mk-resize">').data("monkey-editor",b).append(a('<span class="icon-bar">')).append(a('<span class="icon-bar">')).append(a('<span class="icon-bar">'))}},bindings:{resizeBarMousedown:function(b){var c=a(this),d=a(document),e=c.data("monkey-editor"),f=e.wrapper.$,g=13,h=f.offset().top-d.scrollTop(),i=f.outerHeight()-f.height();b.preventDefault(),b.stopPropagation(),f.addClass("mk-resizing"),d.on("mousemove",function(a){var b=a.clientY-h-i;f.height(Math.max(b,g))}).one("mouseup",function(){d.off("mousemove"),f.removeClass("mk-resizing")})}}},b.editor={klass:function(c){var d=this;this.mk=c,this.$=b.editor.views.makeEditor(this.mk),this.$.appendTo(this.mk.wrapper.$),this.options=this.mk.options;var e=b.editor.fn;this.code=e.code,this.execCommand=e.execCommand,this.cleanEditingLayers=e.cleanEditingLayers,this.nextInsertId=e.nextInsertId,this.triggerUnfocus=e.triggerUnfocus,this.saveSelection=e.saveSelection,this.restoreSelection=e.restoreSelection,this.isSelectionCollapsed=e.isSelectionCollapsed,this.getCurrentRange=e.getCurrentRange,this.selectNode=e.selectNode,this.handleDroppedContent=e.handleDroppedContent;var f=b.editor.bindings;this.$.on("dragover",!1),this.$.on("dragenter ",function(){a(this).addClass("dragover")}),this.$.on("dragleave dragend drop",function(){a(this).removeClass("dragover")}),this.$.on("blur",function(){d.mk.applyChanges(d.code())}),this.$.on("drop",f.fileDrop),this.mk.$.on("monkey:beforeViewSwitch",f.beforeViewSwitch),this.mk.$.on("monkey:afterViewSwitch",f.afterViewSwitch)},views:{makeEditor:function(b){return a('<div class="mk-editable form-control">').data("monkey-editor",b).attr({contenteditable:!0})}},callbacks:{cleanEditingLayers:[]},fn:{cleanEditingLayers:function(){var a=this;b.editor.callbacks.cleanEditingLayers.forEach(function(b){b.call(a)})},code:function(){return this.cleanEditingLayers(),this.$.html()},execCommand:function(b,c){var d,e,f,g=b.split(" "),h=g.shift(),i=g.join(" ")+(c||"");if(0===h.indexOf("insert")&&i){if(d=this.nextInsertId(),"insertImage"===h){if(this.options.image.objectUrl&&0===i.indexOf("data:image")){i=this.mk.dataURItoBlob(i);var j=window.URL||window.webkitURL,k=j.createObjectURL(i);i=k}f=a("<img>").attr({src:i}).css({width:"100%"}),h="insertHTML"}else f=a(i);f=f.attr({"data-monkey-id":d})[0].outerHTML,document.execCommand(h,0,f)}else document.execCommand("styleWithCSS",!1,!0),document.execCommand(h,0,i);return d&&(e=a('[data-monkey-id="'+d+'"]'),e.attr("data-monkey-id",null),e=e[0]),this.mk.$.trigger({type:"monkey:execCommand",command:h,args:i,insertedElement:e}),e},nextInsertId:function(){return this.insertId||(this.insertId=1),"monkey"+this.insertId++},extendViews:function(c){b.views=a.extend(!0,c,b.views)},extendBindings:function(c){b.bindings=a.extend(!0,c,b.bindings)},getCurrentRange:function(){var a=window.getSelection();return a.getRangeAt&&a.rangeCount?a.getRangeAt(0):void 0},selectNode:function(a){var b=document.createRange();b.selectNode(a);try{window.getSelection().removeAllRanges()}catch(c){document.body.createTextRange().select(),document.selection.empty()}window.getSelection().addRange(b)},saveSelection:function(){var a=this.getCurrentRange();a&&(this.selectedRange=a)},isSelectionCollapsed:function(){return this.selectedRange?this.selectedRange.collapsed:!0},restoreSelection:function(a){var b=window.getSelection();if(a=a||this.selectedRange){try{b.removeAllRanges()}catch(c){document.body.createTextRange().select(),document.selection.empty()}b.addRange(a)}},moveCaret:function(a,b){var c,d;if(a.getSelection){if(c=a.getSelection(),c.rangeCount>0){var e=c.focusNode,f=c.focusOffset+b;c.collapse(e,Math.min(e.length,f))}}else(c=a.document.selection)&&"Control"!==c.type&&(d=c.createRange(),d.move("character",b),d.select())},handleDroppedContent:function(b){var c,d=this,e=d.mk,f=b.getData("text/html"),g=b.getData("text/plain"),h=b.files;return h&&h.length>0?(e.insertFiles(h),!0):(f?(c=a(f).filter("img").attr("src"),c||(c=a(f).find("img").attr("src"))):c=g,e.insertFile(c),!0)}},bindings:{fileDrop:function(b){var c=a(this).data("monkey-editor"),d=c.editor;d.handleDroppedContent(b.originalEvent.dataTransfer)&&(b.stopPropagation(),b.preventDefault())},beforeViewSwitch:function(b){var c=a(this),d=c.data("monkey-editor");b.toView!==d.editor&&d.editor.$.hide()},afterViewSwitch:function(b){var c=a(this),d=c.data("monkey-editor");b.toView===d.editor&&(d.editor.$.show(),d.previousView&&d.editor.$.html(d.previousView.code()))}}},b.codeview={klass:function(a){var c=this;this.mk=a,this.options=this.mk.options,this.$=b.codeview.views.makeCodeview(a).appendTo(this.mk.wrapper.$),this.code=b.codeview.fn.code,this.mk.$.on("monkey:beforeViewSwitch",b.codeview.bindings.beforeViewSwitch),this.mk.$.on("monkey:afterViewSwitch",b.codeview.bindings.afterViewSwitch),this.$.on("blur",function(){c.mk.applyChanges(c.code())})},views:{makeCodeview:function(b){return a('<textarea class="mk-codeview form-control">').data("monkey-editor",b).attr({contenteditable:!0})}},fn:{code:function(){return this.$.val()}},bindings:{beforeViewSwitch:function(b){var c=a(this),d=c.data("monkey-editor");b.toView!==d.codeview&&d.codeview.$.hide()},afterViewSwitch:function(b){var c=a(this),d=c.data("monkey-editor");if(b.toView===d.codeview&&(d.codeview.$.show(),d.previousView)){var e=d.tidyHtml(d.previousView.code());d.codeview.$.val(e)}}}},window.monkey=b,a.fn.monkeyEditor=function(c){return c=c||{},this.css({height:"0px",width:"0px",opacity:0,position:"absolute"}),this.mk=new b.klass(this,c),this.data("monkey-editor",this.mk),this.data("options",this.mk.options),this.mk.editor.$.html(this.val()),this.mk.switchView(this.mk.editor),this.mk.toggleFullscreen(!1),a('[data-toggle="tooltip"]').tooltip({container:"body",viewport:"body"}),window.mk=this.mk,this},a(function(){a("[data-monkey-editor]").each(function(){var b=a(this).attr("data-monkey-editor",null),c={};b.monkeyEditor(c)})})}(jQuery),function(a){var b=window.monkey;b.divSelector={options:{divSelector:{selectableTags:["DIV","TABLE","IMG","TR","TD","P","BLOCKQUOTE","CODE","H1","H2","H3","H4","H5","H6","H7","OL","UL","LI","IFRAME","EMBED","VIDEO"],uneditableTags:["TR","TD","LI"],selectionBoxClass:"mk-selection-box",selectionBoxToolbarClass:"mk-selection-box-tools"}},views:{makeSelectionBox:function(){return a("<div>").addClass(this.options.divSelector.selectionBoxClass+" hidden")},makeToolbar:function(){return a('<div class="'+this.options.divSelector.selectionBoxToolbarClass+'">')},makeDeleteButton:function(){return a('<a href="javascript:;" class="btn btn-xs btn-danger btn-delete"><span class="fa fa-trash"></span></a>')}},klass:function(a){var c=b.divSelector.fn;this.monkeyEditor=a,this.mk=a,this.options=a.options,this.target=null,this.makeSelectionBox=b.divSelector.views.makeSelectionBox,this.makeDeleteButton=b.divSelector.views.makeDeleteButton,this.makeSettingButton=b.divSelector.views.makeSettingButton,this.makeToolbar=b.divSelector.views.makeToolbar,this.replaceSelectionBox=c.replaceSelectionBox,this.toggleSelectionBox=c.toggleSelectionBox,this.editor=a.editor,this.moveSelectionBox=c.moveSelectionBox,this.removeTarget=c.removeTarget,this.isSelected=c.isSelected,this.isTargetEditable=c.isTargetEditable,this.triggerSelect=c.triggerSelect,this.triggerUnselect=c.triggerUnselect,this.selectableTags=this.options.divSelector.selectableTags,this.uneditableTags=this.options.divSelector.uneditableTags},fn:{toggleSelectionBox:function(a){this.$&&this.$.toggleClass("hidden",!a)},isTargetEditable:function(){return-1===this.uneditableTags.indexOf(this.target.tagName)},moveSelectionBox:function(b){b=a(b);var c=b.position();if(c){c.left=c.left+this.editor.$.scrollLeft(),c.top=c.top+this.editor.$.scrollTop();var d=b.css("margin-top"),e=b.css("margin-bottom"),f=b.css("margin-left"),g=b.css("margin-right"),h=b.css("padding-top"),i=b.css("padding-bottom"),j=b.css("padding-left"),k=b.css("padding-right"),l=b.innerWidth(),m=b.innerHeight(),n=b.outerWidth(!0),o=b.outerHeight(!0),p="left center, right center, center top, center bottom, "+f+" "+d+", "+(parseInt(f)+l-parseInt(k))+"px "+d+", "+f+" "+d+", "+f+" "+(parseInt(d)+m-parseInt(i))+"px",q=f+" 100%,"+g+" 100%,100% "+d+",100% "+e+","+j+" "+m+"px,"+k+" "+m+"px,"+l+"px "+h+","+l+"px "+i;this.replaceSelectionBox(),this.$.css({left:c.left+"px",top:c.top+"px",width:n+"px",height:o+"px","background-position":p,"background-size":q}),this.$deleteButton&&this.$deleteButton.toggle(this.isTargetEditable()),this.editor.$.trigger({type:"monkey:selectionBoxMoved",target:this.target})}},replaceSelectionBox:function(){var b=this.editor.$.find("."+this.options.divSelector.selectionBoxClass);if(0===b.length||0===a("."+this.options.divSelector.selectionBoxToolbarClass,b).length){b.remove();var c=this;this.$=this.makeSelectionBox(),this.$toolbar=this.makeToolbar(),this.$.append(this.$toolbar),this.editor.$.append(this.$),this.$deleteButton=this.makeDeleteButton(),this.$toolbar.append(this.$deleteButton),this.$deleteButton.on("click",function(a){return c.removeTarget(c.target),a.stopPropagation(),a.preventDefault(),!1}),this.editor.$.trigger({type:"monkey:selectionBoxReplaced",$toolbar:c.$toolbar,target:c.target})}},isSelected:function(){return!!this.target},triggerSelect:function(a){this.target=a,this.editor.$.trigger({type:"monkey:selectDiv",selectTarget:a}),this.editor.$.trigger({type:"monkey:afterSelectDiv",selectTarget:a})},triggerUnselect:function(){this.target&&(this.lastSelectedTarget=this.target),this.target=null,this.editor.$.trigger({type:"monkey:unselectDiv",selectTarget:this.target}),this.editor.$.trigger({type:"monkey:afterUnselectDiv",selectTarget:this.target})},removeTarget:function(){var b=a(this.target),c=this.mk,d=c.editor;d.$.trigger({type:"monkey:elementRemoved",removedElement:this.target}),this.triggerUnselect(),b.remove()}},bindings:{editorKeydown:function(b){var c=a(this).data("div-selector");return 8===b.keyCode&&b.shiftKey&&c.isSelected()?(c.removeTarget(),!1):void(16===b.keyCode||b.ctrlKey||b.metaKey||c.triggerUnselect())},editorClick:function(b){var c,d,e=b.target,f=a(this).data("div-selector"),g=window.getSelection();if(!g.isCollapsed){var h=g.getRangeAt(0).commonAncestorContainer;h&&(e=h)}d=a(e).closest(f.selectableTags.join(",")),c=d[0]===this,c||e===this?f.triggerUnselect():f.selectableTags.indexOf(e.tagName)>-1?f.triggerSelect(e):f.selectableTags.indexOf(d[0].tagName)>-1&&f.triggerSelect(d[0])}}},b.callbacks.afterInitialize.push(function(){var a=this.editor,c=this;this.extendOptions(b.divSelector.options);var d=new b.divSelector.klass(this);this.divSelector=d,a.$.data("div-selector",d),a.$.on("keydown",b.divSelector.bindings.editorKeydown),a.$.on("monkey:afterSelectDiv",function(a){d.moveSelectionBox(a.selectTarget),d.toggleSelectionBox(!0)}),a.$.on("monkey:afterUnselectDiv",function(){d.toggleSelectionBox(!1)}),a.$.on("blur",function(){d.triggerUnselect()}).on("monkey:fileInserted",function(a){setTimeout(function(){d.triggerSelect(a.insertedElement)},100)}),this.$.on("monkey:beforeViewSwitch",function(b){b.toView!==a&&a.$.find("."+c.options.divSelector.selectionBoxClass).remove()}).on("monkey:execCommand",function(a){"insertHTML"===a.command&&a.insertedElement&&setTimeout(function(){d.triggerSelect(a.insertedElement)})}),a.$.on("click",b.divSelector.bindings.editorClick)}),b.editor.callbacks.cleanEditingLayers.push(function(){var a=this.mk.divSelector.$;a&&a.remove()})}(jQuery),function(a){String.prototype.parseValue=function(a){return this.replace(/%{value}/,a)};var b=window.monkey;b.toolbar={options:{toolbar:{selector:"[data-role=editor-toolbar]",commandKey:"data-edit",actionKey:"data-action",activeClass:"active",disabledClass:"disabled",enableOnCodeviewSelector:"[data-enable-codeview]",commandBtnSelector:"a[data-edit],button[data-edit],input[type=button][data-edit]",keydownTriggerInputSelector:"input:not([type]),input[type=text],input[type=number]",changeTriggerInputSelector:"input[type=color],[data-colorpicker]",fileSelector:"input[type=file]",actionBtnSelector:"a[data-action],button[data-action],input[type=button][data-action]"}},callbacks:{beforeInitialize:[]},actions:{codeview:function(){var a=this.mk;a.activeView===a.editor?a.switchView(a.codeview):a.switchView(a.editor)},delegate:function(b){this.triggerInputAction(a(b))},setCss:function(b){var c=this.mk,d=c.divSelector.lastSelectedTarget;a(c.divSelector.lastSelectedTarget).css(JSON.parse(b)),c.divSelector.triggerSelect(d)},fullscreen:function(){this.mk.toggleFullscreen(!this.mk.fullscreen)},addLink:function(b){var c=this.mk,d=c.editor,e=c.divSelector.lastSelectedTarget,f=a(e);d.isSelectionCollapsed()?(f.parent().is("a")?f.parent().attr({href:b}):a(e).wrap(a("<a>").attr({href:b})),c.divSelector.triggerSelect(e)):this.processCommandOrAction("createLink "+b)},removeLink:function(){var b=this.mk,c=b.editor,d=b.divSelector.lastSelectedTarget,e=a(d);c.isSelectionCollapsed()?(e.parent().is("a")&&a(d).unwrap(),b.divSelector.triggerSelect(d)):this.processCommandOrAction("unlink")},fontSize:function(b){var c=this,d=c.mk,e=d.divSelector,f=window.getSelection(),g=f.getRangeAt(0),h=!!f.getRangeAt(0).commonAncestorContainer.tagName,i=g.commonAncestorContainer;if("px"!==b&&b||(b=""),f.isCollapsed||h)e.lastSelectedTarget&&a(e.lastSelectedTarget).css({"font-size":b});else{1!==i.nodeType&&(i=i.parentNode);var j=a(i),k=f.toString();if(j.text().trim()===k.trim())j.css({"font-size":b}),j.children("span").each(function(){var b=a(this);b.css({"font-size":""}),0===b[0].style.length&&(b.after(b.contents()),b.remove())});else{var l=a("<span>").append(k).css({"font-size":b});g.deleteContents(),g.insertNode(l[0])}}}},bindings:{btnClick:function(){var b=a(this),c=b.data("monkey-editor"),d=b.attr(c.options.toolbar.commandKey),e=b.attr(c.options.toolbar.actionKey);c.toolbar.processCommandOrAction(d,e)},inputClick:function(a){return a.preventDefault(),!1},inputBlur:function(){var b=a(this),c=b.data("monkey-editor"),d=c.editor;d.restoreSelection()},inputChange:function(){var b=a(this),c=b.data("monkey-editor"),d=b.attr(c.options.toolbar.commandKey),e=b.attr(c.options.toolbar.actionKey);d&&(d=d.parseValue(b.val())),e&&(e=e.parseValue(b.val())),c.toolbar.processCommandOrAction(d,e)},inputKeydown:function(b){var c=a(this),d=c.data("monkey-editor");13===b.keyCode&&(d.toolbar.triggerInputAction(c),b.preventDefault())},fileDrop:function(b){var c=a(this),d=c.data("monkey-editor"),e=d.editor;b.stopPropagation(),b.preventDefault(),e.handleDroppedContent(b.originalEvent.dataTransfer),a(this).val("")},fileChange:function(){var b=a(this),c=b.data("monkey-editor");"file"===this.type&&this.files&&this.files.length>0&&(c.insertFiles(this.files),a(this).val(""))}},fn:{processCommandOrAction:function(a,b){var c=this.mk.editor;c.restoreSelection(),c.$.focus(),a&&c.execCommand(a),b&&this.processAction(b),c.saveSelection()},processAction:function(a){var c=a.split(" "),d=c.shift(),e=c.join(" ");b.toolbar.actions[d].apply(this,[e]),this.mk.$.trigger({type:"monkey:execAction",action:d})},triggerInputAction:function(a){var b=this.mk,c=a.attr(b.options.toolbar.commandKey),d=a.attr(b.options.toolbar.actionKey);c&&(c=c.parseValue(a.val())),d&&(d=d.parseValue(a.val())),b.toolbar.processCommandOrAction(c,d)},storeCssActions:function(){var b=this.options.toolbar;a(b.selector).find("["+b.actionKey+"^=setCss]").each(function(){var b=a(this),c=b.attr("data-action").split(" ")[1];try{var d=Object.keys(JSON.parse(c));b.data("css-actions",d)}catch(e){console.error("Failed to parse cssProperty",c)}})},updateCssActions:function(){var b=this.options.toolbar,c=this.mk.divSelector;a(b.selector).find("["+b.actionKey+"^=setCss]").each(function(){var b=a(this),d=b.data("css-actions");for(var e in d){var f=d[e],g=c.target?c.target.style[f]:"";b.val(g||""),a(this).trigger({type:"monkey:valueUpdated",cssProperty:f,newValue:g})}})},updateAddLink:function(){var b=this.options.toolbar,c=this.mk,d=c.editor,e="addLink",f=this.mk.divSelector,g=a(f.target),h="",i=a(b.selector).find("["+b.actionKey+"^="+e+"]");i.each(function(){var b=a(this),c=g.parent();if(d.isSelectionCollapsed())c&&c.is("a")&&(h=c.attr("href"));else{var f=document.getSelection().anchorNode.parentNode,i=a(f);i.is("a")&&(h=i.attr("href"))}b.val(h),b.trigger({type:"monkey:valueUpdated",keyword:e,newValue:h})})},update:function(){var b=this.options.toolbar;b.activeClass&&a(b.selector).find(b.commandBtnSelector).each(function(){var c=a(this).attr(b.commandKey);a(this).toggleClass(b.activeClass,document.queryCommandState(c))}),a(b.selector).find(b.changeTriggerInputSelector).each(function(){var c=a(this).attr(b.commandKey),d=c?c.split(" "):null,e=d?document.queryCommandValue(d[0]):null;a(this).val(e),a(this).trigger({type:"monkey:valueUpdated",keyword:d?d:c,newValue:e})}),this.updateCssActions(),this.updateAddLink()},switchView:function(b){var c=this.mk,d=this.options.toolbar,e=d.activeClass,f=d.disabledClass,g=a("["+d.actionKey+"=codeview]",this),h=a(d.enableOnCodeviewSelector,this);b===c.codeview?(g.addClass(e),a(".btn,input",this).addClass(f),h.removeClass(f)):(g.removeClass(e),a(".btn,input",this).removeClass(f))},resetFullscreenWrapperTop:function(){var a=this.mk;setTimeout(function(){a.wrapper.$.css({top:a.toolbar.outerHeight()})})},toggleFullscreen:function(b){var c=this.mk,d=this.options.toolbar,e=a("["+d.actionKey+"=fullscreen]",this);c.toolbar.toggleClass("mk-toolbar-float",b),e.toggleClass(d.activeClass,b),b?setTimeout(this.resetFullscreenWrapperTop):c.wrapper.$.css({top:""})},convertFileIntoUrl:function(b){var c=a.Deferred(),d=new FileReader;return d.onload=function(a){c.resolve(a.target.result)},d.onerror=c.reject,d.onprogress=c.notify,d.readAsDataURL(b),c.promise()}}},a.fn.monkeyToolbar=function(a){var c=b.toolbar.fn;return this.mk=a,this.editor=this.mk.editor,this.options=this.mk.options,this.processAction=c.processAction,this.triggerInputAction=c.triggerInputAction,this.storeCssActions=c.storeCssActions,this.update=c.update,this.updateCssActions=c.updateCssActions,this.updateAddLink=c.updateAddLink,this.switchView=c.switchView,this.toggleFullscreen=c.toggleFullscreen,this.resetFullscreenWrapperTop=c.resetFullscreenWrapperTop,this.processCommandOrAction=c.processCommandOrAction,this.addClass("mk-toolbar"),this.storeCssActions(),this},b.callbacks.afterInitialize.push(function(){var c=this.editor;a("[data-toggle=dropdown]").dropdown(),this.execCallbacks(b.toolbar.callbacks.beforeInitialize),this.extendOptions(b.toolbar.options);var d=a(this.options.toolbar.selector).monkeyToolbar(this);this.toolbar=d,this.toolbar.find(this.options.toolbar.commandBtnSelector).data("monkey-editor",this).click(b.toolbar.bindings.btnClick),this.toolbar.find(this.options.toolbar.keydownTriggerInputSelector).data("monkey-editor",this).click(b.toolbar.bindings.inputClick).blur(b.toolbar.bindings.inputBlur).keydown(b.toolbar.bindings.inputKeydown),this.toolbar.find(this.options.toolbar.changeTriggerInputSelector).data("monkey-editor",this).blur(b.toolbar.bindings.inputBlur).change(b.toolbar.bindings.inputChange),this.toolbar.find(this.options.toolbar.fileSelector).data("monkey-editor",this).change(b.toolbar.bindings.fileChange).on("dragenter dragover",!1).on("drop",b.toolbar.bindings.fileDrop),this.toolbar.find(this.options.toolbar.actionBtnSelector).data("monkey-editor",this).click(b.toolbar.bindings.btnClick),c.$.on("mouseup monkey:afterSelectDiv",function(){d.update()}).on("mouseup keyup",function(){c.saveSelection()}),this.$.on("monkey:execCommand",function(){d.update()}),this.$.on("monkey:afterViewSwitch",function(a){d.switchView(a.toView)}),this.$.on("monkey:toggleFullscreen",function(a){d.toggleFullscreen(a.fullscreen)}),a(window).on("resize",d.resetFullscreenWrapperTop)})}(jQuery),function(a){var b=window.monkey;b.spaceDivs={options:{spaceDivs:{moveDelay:0,hideDelay:0,excludeTags:["TD"]}},klass:function(a){this.mk=a,this.options=this.mk.options,this.editor=this.mk.editor;var c=b.spaceDivs;this.top=c.views.makeTop.call(this),this.bottom=c.views.makeBottom.call(this),this.target=null,this.hideTimer=null,this.clearHideTimer=c.fn.clearHideTimer,this.moveTimer=null,this.clearMoveTimer=c.fn.clearMoveTimer,this.moveToTarget=c.fn.moveToTarget,this.hide=c.fn.hide,this.resetBindings=c.fn.resetBindings,this.excludeTags=this.options.spaceDivs.excludeTags},views:{makeTop:function(){return a('<div class="mk-space mk-space-top"><br></div>')},makeBottom:function(){return a('<div class="mk-space mk-space-bottom"><br></div>')}},events:{clickSpace:function(b){var c=a(this),d=c.data("space-divs"),e=a(d.target),f=a("<div>"),g=c.hasClass("mk-space-top");g?e.before(f):e.after(f),b.preventDefault(),b.stopPropagation(),d.mk.divSelector.triggerSelect(f[0])}},fn:{clearHideTimer:function(){var a=this.hideTimer;a&&(clearTimeout(a),this.hideTimer=null)},clearMoveTimer:function(){var a=this.moveTimer;a&&(clearTimeout(a),this.moveTimer=null)},hide:function(){var a=this;this.target&&!this.hideTimer&&(this.clearHideTimer(),this.hideTimer=setTimeout(function(){a.top.remove(),a.bottom.remove(),a.target=null,a.hideTimer=null},this.options.spaceDivs.hideDelay))},resetBindings:function(){this.top.data("space-divs",this),this.bottom.data("space-divs",this),this.top.off("click"),this.bottom.off("click"),this.top.on("click",b.spaceDivs.events.clickSpace),this.bottom.on("click",b.spaceDivs.events.clickSpace)},moveToTarget:function(a){var b=this,c=function(){b.target=a,b.mk.divSelector.$.append(b.top),b.mk.divSelector.$.append(b.bottom),b.resetBindings()};this.target?this.target!==a&&(this.clearMoveTimer(),this.moveTimer=setTimeout(c,this.options.spaceDivs.moveDelay)):c()}},bindings:{editorSelectDiv:function(b){var c=b.selectTarget,d=a(this).data("space-divs");c&&(-1===d.excludeTags.indexOf(c.tagName)?(d.clearHideTimer(),c.classList.contains("mk-space")?d.clearMoveTimer():d.moveToTarget(c)):d.hide())},editorUnselectDiv:function(){var b=a(this).data("space-divs");b.hide()}}},b.callbacks.afterInitialize.push(function(){this.extendOptions(b.spaceDivs.options);var a=this.editor,c=this,d=new b.spaceDivs.klass(this);a.$.data("space-divs",d),a.$.on("monkey:afterSelectDiv",b.spaceDivs.bindings.editorSelectDiv),a.$.on("monkey:unselectDiv",b.spaceDivs.bindings.editorUnselectDiv),this.divSelector&&this.$.on("monkey:execCommand",function(a){if("insertHTML"===a.command)try{c.divSelector.triggerSelect(a.insertedElement)}catch(a){}})})}(jQuery),function(a){var b=window.monkey;b.toolbar=a.extend(!0,{},b.toolbar||{}),b.toolbarHelpers={imageInserter:function(){a("[data-monkey-image-inserter]").attr("data-monkey-image-inserter",null).each(function(){})},tablePicker:function(){var b=this,c=function(b,c,d){for(var e=a('<table class="table table-bordered">'),f=0;b>f;f++){for(var g=a("<tr>"),h=0;c>h;h++){var i=a("<td>&nbsp;</td>").appendTo(g);d&&i.attr({"data-row":f+1,"data-col":h+1})}e.append(g)}return e};a("[data-monkey-table-picker]").attr("data-monkey-table-picker",null).each(function(){var d=a(this),e=c(10,10,!0),f=a('<div class="mk-table-picker-status">');d.addClass("mk-table-picker").append(e).append(f),a("td",e).on("click",function(){var d=a(this),e=parseInt(d.attr("data-row")),f=parseInt(d.attr("data-col")),g="insertHTML "+c(e,f,!1)[0].outerHTML;b.toolbar.processCommandOrAction(g)}).on("mouseenter",function(){var b=a(this),c=parseInt(b.attr("data-row")),d=parseInt(b.attr("data-col"));f.html(c+"&times;"+d)}),e.on("mouseleave",function(){f.html("")})}),setTimeout(function(){document.execCommand("enableInlineTableEditing",null,!1)},1e3)}};for(var c in b.toolbarHelpers)b.toolbar.callbacks.beforeInitialize.push(b.toolbarHelpers[c])}(jQuery),function(){var a=window.monkey;a.modals={options:{modal:{selector:"[data-role=editor-modals] > .modal",modalKey:"data-modal"}},views:{makeSettingButton:function(){return $('<a href="javascript:;" class="btn btn-xs btn-default"><span class="fa fa-cog"></span></a>')}},bindings:{},fn:{}},a.toolbar=$.extend(!0,{actions:{openModal:function(a){var b=this.mk,c=b.options.modal;$(c.selector+"["+c.modalKey+"="+a+"]").modal("show")}}},a.toolbar||{}),a.callbacks.afterInitialize.push(function(){var b=this.editor,c=this.divSelector,d=this;this.extendOptions(a.modals.options),this.options.modal.selector&&($(this.options.modal.selector).modal({show:!1}).data("monkey-editor",this).on("show.bs.modal",function(){}).on("hide.bs.modal",function(){var a=$(this),b=a.data("monkey-editor"),c=b.divSelector;c.triggerSelect(c.lastSelectedTarget)}),b.$.on("monkey:selectionBoxReplaced",function(){var b=a.modals.views.makeSettingButton();c.$toolbar.prepend(b),b.on("click",function(a){var b=d.options.modal;return $(b.selector+"["+b.modalKey+"=settings]").modal("show"),a.stopPropagation(),a.preventDefault(),!1})}).on("monkey:selectionBoxMoved",function(){}))})}(),function(a){var b=window.monkey;b.copier={options:{copier:{nonInsertableTags:["TR","TH","TD","LI"],replaceableTags:["TABLE","IMG","DIV"]}},klass:function(a){var c=b.copier.fn,d=b.copier.views;this.mk=a,this.options=a.options,this.copy=c.copy,this.paste=c.paste,this.insertable=c.insertable,this.replaceable=c.replaceable,this.copiedContent=null,this.makeCopyButton=d.makeCopyButton,this.makePasteButton=d.makePasteButton},views:{makeCopyButton:function(){return a('<a href="javascript:;" class="btn btn-xs btn-default btn-copy"><span class="fa fa-files-o"></span></a>')},makePasteButton:function(){return a('<a href="javascript:;" class="btn btn-xs btn-default btn-paste"><span class="fa fa-clipboard"></span></a>')}},fn:{insertable:function(a){return a instanceof HTMLElement?-1===this.options.copier.nonInsertableTags.indexOf(a.tagName):!0},replaceable:function(a,b){var c=this.options.copier.replaceableTags;return a&&b?a.tagName===b.tagName?!0:c.indexOf(a.tagName)>-1&&c.indexOf(b.tagName)>-1?!0:!1:!1}},bindings:{makeCutOrCopy:function(b){return function(c){var d=a(this).data("monkey-editor"),e=d.editor,f=d.divSelector,g=d.copier,h=f.target,i=document.getSelection().isCollapsed;return i?(g.copiedContent=h,e.selectNode(h),"cut"===b&&f.triggerUnselect(),document.execCommand(b),c.preventDefault(),c.stopPropagation(),!1):void(g.copiedContent=null)}},paste:function(b){var c=a(this).data("monkey-editor"),d=c.copier,e=c.divSelector,f=d.copiedContent,g=f instanceof HTMLElement,h=e.target;if(h){if(g){if(d.replaceable(h,f)){var i=a(f).clone();return e.triggerUnselect(),a(h).replaceWith(i),void setTimeout(function(){e.triggerSelect(i[0])})}return b.stopPropagation(),b.preventDefault(),!1}e.triggerUnselect()}else if(g)return d.insertable(f)&&document.execCommand("insertHTML",!1,f.outerHTML),b.stopPropagation(),b.preventDefault(),!1}}},b.callbacks.afterInitialize.push(function(){this.extendOptions(b.copier.options);var a=this.editor,c=this.divSelector,d=new b.copier.klass(this),e=b.copier.bindings;this.copier=d,a.$.on("keydown",null,"ctrl+c meta+c",e.makeCutOrCopy("copy")),a.$.on("keydown",null,"ctrl+x meta+x",e.makeCutOrCopy("cut")),a.$.on("keydown",null,"ctrl+v meta+v",e.paste),a.$.on("monkey:selectionBoxReplaced",function(){var b=e.makeCutOrCopy("copy"),f=a.getCurrentRange();d.$pasteButton=d.makePasteButton(),d.$copyButton=d.makeCopyButton(),c.$toolbar.prepend(d.$pasteButton).prepend(d.$copyButton),d.$copyButton.on("click",function(c){a.restoreSelection(f),b.call(a.$,c)}),d.$pasteButton.on("click",function(b){a.restoreSelection(f),e.paste.call(a.$,b)})}).on("monkey:selectionBoxMoved",function(){var a=c.isTargetEditable();d.$pasteButton&&d.$pasteButton.toggle(a),d.$copyButton&&d.$copyButton.toggle(a)})})}(jQuery),function(a){var b=window.monkey;b.callbacks.afterInitialize.push(function(){var b=this;a("[data-colorpicker]").colorpicker({colorSelectors:{transparent:"transparent",black:"black",white:"white",red:"red",green:"green",blue:"blue"}}).on("changeColor.colorpicker",function(b){a(this).css("background-color",b.color.toHex())}).on("monkey:valueUpdated",function(b){b.newValue?a(this).colorpicker("setValue",b.newValue):a(this).colorpicker("setValue","transparent")}).on("hidePicker.colorpicker",function(){a(this).trigger("change")}),this.$.on("monkey:afterViewSwitch",function(c){c.toView===b.editor?a("[data-colorpicker]").colorpicker("enable"):a("[data-colorpicker]").colorpicker("disable")})})}(jQuery);